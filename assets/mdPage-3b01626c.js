import{r as i,w as x,a as y,o as m,c as k,g as C,_ as P,u as T,b as S,m as A,d as p,e as h,f,h as R,E as $,F as B,i as D,n as M,j as g,t as N}from"./index-113f244b.js";const b={__name:"MDPreview",props:{path:{type:String,required:!0}},setup(v,{expose:d}){const a=v,l=i(""),c=i(null);x(()=>a.path,async()=>{if(a.path){const{modules:s}=C(),_=s.MD[a.path];l.value=_||"暂无内容"}else l.value="## 欢迎您，我的朋友"},{immediate:!0});function n(s){c.value.scrollToTarget({target:s,scrollContainer:window,top:60})}return d({scrollTo:n}),(s,_)=>{const t=y("v-md-preview");return m(),k(t,{text:l.value,ref_key:"mdPreviewRef",ref:c},null,8,["text"])}}};const q={class:"md-page"},E={class:"catalog-wrap"},F={class:"catalog"},I=["onClick"],V={__name:"mdPage",setup(v){const d=i({}),a=T(),l=S(),c=A(),u=i([]),n=i(null);x(()=>a.params.id,t=>{a.path.includes("mdPage")&&(t&&c.articlesMap[t]?(d.value=c.articlesMap[t],M(()=>{s()})):l.replace("/"))},{immediate:!0,deep:!0});function s(){const t=n.value.$el.querySelectorAll("h1,h2,h3,h4"),o=Array.from(t).filter(e=>!!e.innerText.trim());if(!o.length){u.value=[];return}const r=Array.from(new Set(o.map(e=>e.tagName))).sort();u.value=o.map(e=>({title:e.innerText,lineIndex:e.getAttribute("data-v-md-line"),indent:r.indexOf(e.tagName)}))}const _=t=>{const{lineIndex:o}=t,r=n.value.$el.querySelector(`[data-v-md-line="${o}"]`);r&&n.value.scrollTo(r)};return(t,o)=>{const r=$;return m(),p("div",q,[h(b,{path:d.value.path,class:"markdown-preview",ref_key:"mdPreviewRef",ref:n},null,8,["path"]),f("div",E,[h(r,{offset:40},{default:R(()=>[f("div",F,[(m(!0),p(B,null,D(u.value,(e,w)=>(m(),p("div",{key:w,style:g({"padding-left":`${e.indent*20}px`}),onClick:j=>_(e),class:"catalog-item"},[f("span",{class:"catalog-item-text",style:g({"font-weight":e.indent>1?"normal":"bold"})},N(e.title),5)],12,I))),128))])]),_:1})])])}}},L=P(V,[["__scopeId","data-v-8739d873"]]);export{L as default};
