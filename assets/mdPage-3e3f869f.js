import{r as d,w as C,a as X,o as m,c as A,g as $,_ as T,b as D,n as k,u as B,d as E,m as F,e as x,f as _,h as R,i as h,E as N,F as L,j as O,k as W,t as q,p as U,l as z}from"./index-5a699d42.js";const G={__name:"MDPreview",props:{path:{type:String,required:!0}},setup(e,{expose:t}){const i=e,c=d(""),p=d(null);C(()=>i.path,async()=>{if(i.path){const{modules:l}=$(),r=l.MD[i.path];c.value=r||"暂无内容"}else c.value="## 欢迎您，我的朋友"},{immediate:!0});function n(l){p.value.scrollToTarget({target:l,scrollContainer:window,top:60})}return t({scrollTo:n}),(l,r)=>{const g=X("v-md-preview");return m(),A(g,{text:c.value,ref_key:"mdPreviewRef",ref:p},null,8,["text"])}}};const H={props:{origin:{type:Number,default:0}},data(){return{move:0,isDrag:!1}},watch:{move(e){this.$emit("change",e)}},methods:{onDragMouseDown(e){var t;this.isDrag=!0,this.dragX=e.clientX||e.touches&&((t=e.touches[0])==null?void 0:t.clientX),this.start=this.origin},onDragMouseMove(e){var t;if(this.isDrag){const c=(e.clientX||e.touches&&((t=e.touches[0])==null?void 0:t.clientX))-this.dragX;this.move=this.start-c}},onDragMouseUp(){this.isDrag=!1}}};function V(e,t,i,c,p,o){return m(),D("div",{class:k(["drag-bar",{"is-draging":p.isDrag}]),style:{width:"6px"},onMousedown:t[0]||(t[0]=(...n)=>o.onDragMouseDown&&o.onDragMouseDown(...n)),onMousemove:t[1]||(t[1]=(...n)=>o.onDragMouseMove&&o.onDragMouseMove(...n)),onMouseup:t[2]||(t[2]=(...n)=>o.onDragMouseUp&&o.onDragMouseUp(...n))},null,34)}const j=T(H,[["render",V],["__scopeId","data-v-0a09261d"]]);const J=e=>(U("data-v-7a6a0b14"),e=e(),z(),e),K={class:"md-page"},Q=J(()=>_("i",{class:"iconfont icon-unfold"},null,-1)),Y=[Q],Z={class:"catalog"},ee=["onClick"],y=400,M=15,te={__name:"mdPage",setup(e){const t=d({}),i=B(),c=E(),p=F(),o=d([]),n=d(null),l=d(!1),r=d(y),g=d(!1);let w=null;C(()=>i.params.id,a=>{i.path.includes("mdPage")&&(a&&p.articlesMap[a]?(t.value=p.articlesMap[a],W(()=>{S()})):c.replace("/"))},{immediate:!0,deep:!0}),C(l,a=>{r.value=a?M:w||y});function S(){const a=n.value.$el.querySelectorAll("h1,h2,h3,h4"),u=Array.from(a).filter(s=>!!s.innerText.trim());if(!u.length){o.value=[];return}const v=Array.from(new Set(u.map(s=>s.tagName))).sort();o.value=u.map(s=>({title:s.innerText,lineIndex:s.getAttribute("data-v-md-line"),indent:v.indexOf(s.tagName)}))}const b=a=>{const{lineIndex:u}=a,v=n.value.$el.querySelector(`[data-v-md-line="${u}"]`);v&&n.value.scrollTo(v)};let f=null;const I=a=>{!l.value&&a<y&&(r.value=a,w=r.value,a<M&&(r.value=M,w=null,l.value=!0),g.value=!0,f&&clearTimeout(f),f=setTimeout(()=>{g.value=!1,f=null},600))};return(a,u)=>{const v=N;return m(),D("div",K,[x(G,{path:t.value.path,class:"markdown-preview",ref_key:"mdPreviewRef",ref:n},null,8,["path"]),_("div",{class:k(["catalog-wrap",{fold:l.value,"no-ani":g.value}]),style:h({width:`${r.value}px`})},[x(v,{offset:40,style:h({width:`${r.value}px`})},{default:R(()=>[x(j,{origin:r.value,onChange:I},null,8,["origin"]),_("div",{class:"fold-btn",onClick:u[0]||(u[0]=s=>l.value=!l.value)},Y),_("div",Z,[(m(!0),D(L,null,O(o.value,(s,P)=>(m(),D("div",{key:P,style:h({"padding-left":`${s.indent*20}px`}),onClick:ae=>b(s),class:"catalog-item"},[_("span",{class:"catalog-item-text",style:h({"font-weight":s.indent>1?"normal":"bold"})},q(s.title),5)],12,ee))),128))])]),_:1},8,["style"])],6)])}}},ne=T(te,[["__scopeId","data-v-7a6a0b14"]]);export{ne as default};
